# HOOK

---

### 1. 서비스 개요

- 흔히 hook 음악이란 짧은 후렴구에 반복된 가사로 사람의 귀를 사로잡는 상업적 대중 음악을 말합니다. 이렇듯 HOOK은 저희만의 서비스로 사람들의 마음을 사로잡자는 의미를 내포하고 있습니다.

- 기본적으로 영화에 대한 한 줄 평론을 작성할 수 있고, 이를 바탕으로 한 줄 평론에 대한 커뮤니티가 형성됩니다.

- 또한, HOOK만의 위치기반 날씨 추천 서비스를 통해 상황에 따라 알맞은 영화를 사용자에게 매칭해줍니다.

- 추가적으로 결제 기능을 활용해 사용자 포인트를 충전하면 추천 서비스를 사용할 수 있도록 합니다.

---

### 2. 업무 분담

**이기표** - 추천 알고리즘 개발, 결제 시스템 생성, DB 및 REST API 생성,  Vue 컴포넌트 설계 및 로직 개발

**진희솜** - 휴대폰 인증 로그인 개발, 서비스 배포, DB 및 REST API 생성, Vue 컴포넌트 설계 및 로직 개발

---

### 3. 개발 환경 및 사용 기술

##### 1) 개발 환경

**Frontend**

- Vue : 2.6.14

- axios : 1.4.0

- Font Awesome : 5.8.2

- bootstrap : 5.3.0

**Backed**

- django : 3.2.18

- djangorestframework : 3.14.0

- python : 3.2.0

##### 2) 사용 기술

- Kakaopay API

- Naver sens API

- Google maps API

- 공공데이터포털 API

---

### 4. ERD 및 컴포넌트 설계

#### - ERD
![image](https://github.com/Maker-H/SSAFY-Movie-Service/assets/83294376/82b500d2-79c6-44be-9842-883e2ca3d9e1)

##### - 컴포넌트

![image](https://github.com/Maker-H/SSAFY-Movie-Service/assets/83294376/81a200e6-aca1-4ebb-af31-4cd1064e05bb)

---

### 5. 영화 추천 알고리즘

![](README_assets/2023-05-25-23-19-10-image.png)

1. 사용자에게 현재 주소 정보를 받으면 DB에 있는 지도 정보와 매칭해 위도, 경도가 반환됩니다.

2. 반환된 위도 경도를 통해 Google maps API에서는 지도 정보, 공공 데이터 날씨 API에서는 현재 날씨 정보를 전달 받습니다.

3. 받은 지도 정보는 유저에게 그대로 제공하며, 날씨 정보는 Chat GPT 엔진을 거쳐 날씨에 맞는 영화 장르를 추천받습니다.

4. 추천 받은 영화 장르에 해당하는 영화 한가지를 유저에게 제공합니다.

---

### 6. 서비스 기능

#### 1) 휴대폰 인증 로그인

- Naver sens API의 문자 전송 기능을 활용해 휴대폰 인증시 로그인이 가능하도록 구현

- 장고에서 난수를 생성하고 숫자를 입력받은 번호로 전송, 사용자가 입력한 숫자와 생성된 난수를 비교해 문자 인증 기능을 구현하였습니다.

- 로그인한 유저는 access, refresh 두 가지 토큰을 통해 권한 부여

#### 2) simple jwt를 사용한 토큰 만료 기능

- rest framework의 default authentication class에 jwt 방식을 등록하여 jwt를 사용
- jwt를 사용하여 시간이 흐른 후 토큰이 만료되게 구현
- 로그인 시 access 토큰과 refresh 토큰이 발급되고 refresh 토큰으로 access 토큰을 발급받는 로직을 이용해 보안을 강화

#### 3) 결제 시스템

- Kakaopay API를 활용해 결제 기능 개발

- 사용자가 결제를 진행하면 해당 금액이 포인트로 충전

#### 4) 평론 CRUD

- 영화에 대한 자유로운 한 줄 평론 작성이 가능

- 또한 평론에 대한 수정 및 삭제가 가능

#### 5) 영화 검색

- 텍스트로 영화를 검색하게 되면 텍스트 일치하는 모든 영화를 반환

- 영화를 클릭하면 영화 상세 정보로 이동

#### 6) 유저 프로필

- 유저의 포인트를 결제 및 관리 가능

- 유저가 좋아요한 영화 목록을 확인 가능

---

### 7. 배포 서버

**![](https://lh5.googleusercontent.com/e6rDuXV4j2uo82RIKE7FdZG1XTfqB1QyiYvymxO8IsIlwa_5_WoCtvhjfrU68M7IdlosnjDdvvpeEvSmnMuQ0UxAuTC7qgl3xt3VXQP_Yw5rZnlDFO_SK91CfPdUcmrjzFRFzqs-ywPsLUb16VcyQOXoDw=s2048)**

##### Vue

- npm run build로 dist 폴더 생성

- Nginx로 클라이언트에게 전달

##### Django

- gunicorn을 데몬으로 실행

- Nginx로 클라이언트와 통신

##### Nginx

- Vue의 정적 파일을 서빙

- Django의 프록시 서버로 작동

Nginx를 이용해 빌드한 뷰 파일을 클라이언트에게 배포하였습니다

Nginx와 Gunicorn을 이용해 장고를 구동시켰습니다. 이때 Nginx는 프록시 서버로 활용하였고 Gunicorn은 wsgi를 대신해 앱서버로 활용하였습니다.

쉘 스크립트를 사용해 git pull부터 배포까지를 자동화하였습니다

[www.mhook.o-r.kr](http://www.mhook.o-r.kr) 도메인을 활용해 사이트를 배포하였습니다.

---

### 8. 소감

**이기표** : 일주일이라는 시간이 넉넉할 줄 알았지만, 저희가 구상한 아이디어 모두 실현하기에는 턱없이 부족한 시간이었습니다. 그래서 페어와 함께 데일리 스크럼을 진행하여 개발의 진행 상황을 원활하게 조정할 수 있었고, 또한 노션과 Jira를 활용해 유연하게 일정관리를 진행할 수 있었습니다.

처음 진행한 웹 프로젝트다 보니 뭐든지 배우고 싶은 생각에 프론트와 백엔드를 동시 진행했지만, 서로 다른 문법과 코드 스타일때문에 초반에는 혼란이 왔지만, 점차 익숙해지자 오히려 더욱 유연한 사고로 개발을 진행할 수 있었습니다. 또한, 평소 it 서비스에서 사용하던 다양한 API를 활용함으로써 API 활용에 대한 자신감과 더불어 문제해결 역량 또한 키울 수 있었습니다.

**진희솜** : 평소 인프라쪽에 관심이 있던 터라, 저희 서비스를 배포해보자라는 작은 목표를 세웠습니다. 아무래도 처음 진행하다보니 기본이 되는 포트와 소켓 연결에 대한 내용조차도 몰랐지만, 관통 프로젝트 이외의 시간에 개인적으로 배포 공부를 진행하며 기본 지식을 배양할 수 있었고, 결국 장고쪽에서는 Gunicorn과 Nginx을, vue 쪽에는 Nginx 사용해 집 데스크탑에 서버를 구축했습니다. 최종적으로는 [www.mhook.o-r.kr:25565](http://www.mhook.o-r.kr:25565) 도메인을 활용해 사이트를 배포하였습니다.
